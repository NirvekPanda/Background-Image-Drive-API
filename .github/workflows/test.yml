name: ğŸ§ª API Integration Tests

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]
  workflow_dispatch:

jobs:
  api-tests:
    name: ğŸ§ª Run API Integration Tests
    runs-on: ubuntu-latest
    
    steps:
    - name: ğŸ“¥ Checkout code
      uses: actions/checkout@v4
      
    - name: ğŸ¥ Health Check Test
      run: |
        echo "Testing API health..."
        chmod +x testing/test-health.sh
        ./testing/test-health.sh
        
    - name: ğŸ“¸ Images Test
      run: |
        echo "Testing image upload and retrieval..."
        chmod +x testing/test-images.sh
        ./testing/test-images.sh
        
    - name: ğŸ“ Location Test
      run: |
        echo "Testing location services..."
        chmod +x testing/test-location.sh
        ./testing/test-location.sh
        
    - name: ğŸ¯ Complete Test Suite
      run: |
        echo "Running complete test suite..."
        chmod +x testing/run-all-tests.sh
        ./testing/run-all-tests.sh
        
    - name: ğŸ“Š Test Summary
      run: |
        echo "âœ… All API tests completed successfully!"
        echo "ğŸ¥ Health check: PASSED"
        echo "ğŸ“¸ Images test: PASSED" 
        echo "ğŸ“ Location test: PASSED"
        echo ""
        echo "API is fully functional and ready for production use."
