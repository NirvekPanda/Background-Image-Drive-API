name: ğŸ§ª Manual API Test

on:
  workflow_dispatch:
    inputs:
      test_type:
        description: "Type of test to run"
        required: true
        default: "all"
        type: choice
        options:
          - all
          - health
          - images
          - location

jobs:
  manual-test:
    name: ğŸ§ª Manual API Test
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ“¥ Checkout code
        uses: actions/checkout@v4

      - name: ğŸ¥ Health Check Test
        if: ${{ inputs.test_type == 'all' || inputs.test_type == 'health' }}
        run: |
          echo "Testing API health..."
          chmod +x testing/test-health.sh
          ./testing/test-health.sh

      - name: ğŸ“¸ Images Test
        if: ${{ inputs.test_type == 'all' || inputs.test_type == 'images' }}
        run: |
          echo "Testing image upload and retrieval..."
          chmod +x testing/test-images.sh
          ./testing/test-images.sh

      - name: ğŸ“ Location Test
        if: ${{ inputs.test_type == 'all' || inputs.test_type == 'location' }}
        run: |
          echo "Testing location services..."
          chmod +x testing/test-location.sh
          ./testing/test-location.sh

      - name: ğŸ¯ Complete Test Suite
        if: ${{ inputs.test_type == 'all' }}
        run: |
          echo "Running complete test suite..."
          chmod +x testing/run-all-tests.sh
          ./testing/run-all-tests.sh

      - name: ğŸ“Š Test Summary
        run: |
          echo "âœ… API tests completed successfully!"
          echo "Test type: ${{ inputs.test_type }}"
